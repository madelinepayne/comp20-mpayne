<!DOCTYPE html>

<html>
<head>
    <title>Messages</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script>
        $(document).ready(function(){
            console.log("9");
            $.getJSON("https://messagehub.herokuapp.com/messages.json", function(elements) {
                var newData = [];
                var toPush;
                $.each(elements, function(i) {
                    $.each(elements[i], function (key, val) {
                        if (key == "content") {
                            console.log(key + ": " + val);
                            toPush =  "<p>" + val;
                        };
                        if (key == "username") {
                            console.log(key + ": " + val);
                            if(i == 0) {
                                $("#messages").html(toPush + " by " + val + "</p>");
                            } else {
                                $("#messages").append(toPush + " by " + val + "</p>");
                            }
                        }
                    });
                });
            });
        });
    </script>
</head>

<body>
  <h1>Messages</h1>
  <div id="messages">Loading...</div>
</body>
</html>